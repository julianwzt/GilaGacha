<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GILA GACHA</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="asset/logo.png">
</head>
<body>

<div id="game-container">
    
    <div id="screen-main" class="menu-overlay active">
        <img src="asset/logoawal.png" alt="Gila Gacha" style="width: 300px; margin-bottom: 10px; filter: drop-shadow(0 0 20px rgba(0,255,255,0.5));" onerror="this.style.display='none'">
        <button class="neon-btn" onclick="showScreen('screen-players')">GASKAN</button>
    </div>

    <div id="screen-players" class="menu-overlay">
        <h1 class="game-title" style="font-size: var(--font-xl);">MAIN SAMA SIAPA?</h1>
        <div id="players-buttons-container" style="display: flex; justify-content: center;">
            <button class="neon-btn p1-style tooltip-btn" onclick="setPlayerMode(true)">SENDIRI</button>
            <button class="neon-btn p2-style" onclick="setPlayerMode(false)">BERDUA</button>
        </div>
    </div>

    <div id="screen-mode" class="menu-overlay">
        <h1 class="game-title" style="font-size: var(--font-xl);">PILIH MODE</h1>
        <div id="mode-buttons-container" style="display: flex; flex-direction: column; align-items: center;">
            <div style="display: flex; justify-content: center;">
                <button class="neon-btn p1-style" onclick="startGame(true)">ANONIM</button>
                <button class="neon-btn p2-style" onclick="showCustomNameInput()">VERIFIKASI</button>
            </div>
            <button class="neon-btn" onclick="showScreen('screen-players')" style="margin-top: 20px; opacity: 0.8; font-size: var(--font-xs); border-color: #555; color: #aaa;">KEMBALI</button>
        </div>

        <div id="custom-name-form" class="input-group" style="display: none;">
            <div class="player-setup">
                <input type="text" id="input-p1" class="custom-input" placeholder="Nama Player 1" maxlength="12">
                <div class="color-palette" id="color-picker-p1">
                    <div class="color-swatch selected" style="--swatch-color: #00ffff;" onclick="selectColor('p1', '#00ffff', this)"></div>
                    <div class="color-swatch" style="--swatch-color: #00ff66;" onclick="selectColor('p1', '#00ff66', this)"></div>
                    <div class="color-swatch" style="--swatch-color: #ffff00;" onclick="selectColor('p1', '#ffff00', this)"></div>
                    <div class="color-swatch" style="--swatch-color: #ff8800;" onclick="selectColor('p1', '#ff8800', this)"></div>
                    <div class="color-swatch" style="--swatch-color: #ff0055;" onclick="selectColor('p1', '#ff0055', this)"></div>
                    <div class="color-swatch" style="--swatch-color: #bf00ff;" onclick="selectColor('p1', '#bf00ff', this)"></div>
                </div>
            </div>

            <div class="player-setup" id="p2-setup-container">
                <input type="text" id="input-p2" class="custom-input" placeholder="Nama Player 2" maxlength="12">
                <div class="color-palette" id="color-picker-p2">
                    <div class="color-swatch" style="--swatch-color: #00ffff;" onclick="selectColor('p2', '#00ffff', this)"></div>
                    <div class="color-swatch" style="--swatch-color: #00ff66;" onclick="selectColor('p2', '#00ff66', this)"></div>
                    <div class="color-swatch" style="--swatch-color: #ffff00;" onclick="selectColor('p2', '#ffff00', this)"></div>
                    <div class="color-swatch" style="--swatch-color: #ff8800;" onclick="selectColor('p2', '#ff8800', this)"></div>
                    <div class="color-swatch selected" style="--swatch-color: #ff0055;" onclick="selectColor('p2', '#ff0055', this)"></div>
                    <div class="color-swatch" style="--swatch-color: #bf00ff;" onclick="selectColor('p2', '#bf00ff', this)"></div>
                </div>
            </div>
            <button class="neon-btn" onclick="startGame(false)" style="margin-top: 20px;">MULAI BERTARUNG</button>
            <button class="neon-btn" onclick="hideCustomNameInput()" style="margin-top: 5px; opacity: 0.8; font-size: var(--font-xs); border-color: #555; color: #aaa;">KEMBALI</button>
        </div>
    </div>

    <div id="screen-end" class="menu-overlay">
        <img id="victory-crown" src="asset/crown.png" alt="Winner Crown" onerror="this.style.display='none'">
        <h2 id="champion-display"></h2>
        <div>
            <button id="btn-play-again" class="neon-btn p1-style" onclick="playAgain()">SEGAME LAGI</button>
            <button class="neon-btn p2-style" onclick="backToMainMenu()">DAHLAH</button>
        </div>
    </div>

    <div class="hud-top">
        <div class="player-stats">
            <div class="name-crown-wrapper">
                <h2 id="p1-name-display" class="p1-text">Si Biru</h2>
                <div id="p1-crowns" class="crown-container"></div>
            </div>
            <div class="hp-bar-frame"><div id="p1-hp" class="hp-fill"></div></div>
            <span id="p1-hp-text">1000 / 1000</span>
        </div>
        <div class="timer-box">TIME<br><div id="timer-text">60</div></div>
        <div class="player-stats">
            <div class="name-crown-wrapper">
                <div id="p2-crowns" class="crown-container"></div>
                <h2 id="p2-name-display" class="p2-text">Si Merah</h2>
            </div>
            <div class="hp-bar-frame"><div id="p2-hp" class="hp-fill"></div></div>
            <span id="p2-hp-text">1000 / 1000</span>
        </div>
    </div>

    <div class="main-arena">
        <div id="p1-machine" class="slot-machine">
            <div class="slot-housing"></div>
            <div id="p1-pointer" class="pointer-arrow"></div>
            <div class="phase-indicator-group">
                <div id="p1-power-label" class="phase-label p1-phase active-phase">POWER</div>
                <div id="p1-extra-label" class="phase-label p1-phase inactive-phase">EXTRA</div>
            </div>
            <div class="drum-container"><div id="p1-drum" class="drum"></div></div>
            <div id="p1-live-calc" class="live-calc-display p1-text">
                <span id="p1-show-power"></span><span id="p1-show-extra"></span><span id="p1-show-total" class="calc-total-val"></span>
            </div>
            <div class="control-area">
                <button id="p1-btn" class="action-btn p1-btn-style" onclick="handleBtnClick('p1')">STOP</button>
                <div id="p1-hint" class="key-hint p1-text">atau tekan F</div>
            </div>
        </div>

        <div id="p2-machine" class="slot-machine">
            <div class="slot-housing"></div>
            <div id="p2-pointer" class="pointer-arrow"></div>
            <div class="phase-indicator-group">
                <div id="p2-power-label" class="phase-label p2-phase active-phase">POWER</div>
                <div id="p2-extra-label" class="phase-label p2-phase inactive-phase">EXTRA</div>
            </div>
            <div class="drum-container"><div id="p2-drum" class="drum"></div></div>
            <div id="p2-live-calc" class="live-calc-display p2-text">
                <span id="p2-show-power"></span><span id="p2-show-extra"></span><span id="p2-show-total" class="calc-total-val"></span>
            </div>
            <div class="control-area">
                <button id="p2-btn" class="action-btn p2-btn-style" onclick="handleBtnClick('p2')">STOP</button>
                <div id="p2-hint" class="key-hint p2-text">atau tekan J</div>
            </div>
        </div>
    </div>

    <div class="hud-bottom"><div class="static-vs">VS</div></div>

    <div id="dark-overlay" class="dark-flash"></div>

    <div id="animation-layer">
        <div id="p1-anim-val" class="clash-item"></div>
        <div id="anim-center-vs" class="anim-vs">VS</div>
        <div id="p2-anim-val" class="clash-item"></div>
        <div id="clash-result-text"></div>
    </div>

    <audio id="sfx-click" src="asset/sfx-click.mp3" preload="auto"></audio>
    <audio id="bgm-menu" src="asset/bgm-menu.mp3" loop preload="auto"></audio>
    <audio id="bgm-game" src="asset/bgm-game.mp3" loop preload="auto"></audio>
    <audio id="sfx-clash" src="asset/sfx-clash.mp3" preload="auto"></audio>
    <audio id="sfx-victory" src="asset/sfx-victory.mp3" preload="auto"></audio>
    <audio id="sfx-miss" src="asset/sfx-miss.mp3" preload="auto"></audio>
    <audio id="sfx-draw" src="asset/sfx-draw.mp3" preload="auto"></audio>
    <audio id="sfx-stop" src="asset/sfx-stop.mp3" preload="auto"></audio>
    <audio id="sfx-jackpot-power" src="asset/sfx-jackpot-power.mp3" preload="auto"></audio>
    <audio id="sfx-jackpot-extra" src="asset/sfx-jackpot-extra.mp3" preload="auto"></audio>
    
    <audio id="sfx-jackpot-double" src="asset/sfx-jackpot-double.mp3" preload="auto"></audio>
</div>

<script src="script.js"></script>
</body>
</html>